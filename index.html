<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Voice Room</title>

  <!-- Wichtig für Handy-Ansicht im Adalo-WebView -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

  <!-- ZEGOCLOUD UIKit einbinden -->
  <script src="https://unpkg.com/@zegocloud/zego-uikit-prebuilt/zego-uikit-prebuilt.js"></script>

  <!-- Dark Premium Look -->
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      overflow: hidden;
      background: #050B14; /* sehr dunkles Blau/Schwarz */
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;
    }

    #root {
      width: 100%;
      height: 100%;
      box-sizing: border-box;
      background: #050B14;
      border-top: 3px solid #F4C04B; /* Gold-Akzent oben */
    }
  </style>
</head>

<body>
  <!-- Container für das Zego UI -->
  <div id="root"></div>

  <script>
    (function () {
      // ---------- URL-Parameter auslesen (von Adalo übergeben) ----------
      // Adalo-URL z.B.:
      // https://deinName.github.io/voice-room/index.html?room={Room raumname}&user={User full name}

      const params   = new URLSearchParams(window.location.search);
      const roomID   = params.get("room") || "testroom";
      const userName = params.get("user") || ("User " + Math.floor(Math.random() * 100000));
      const userID   = String(Math.floor(Math.random() * 10000000));

      // ---------- DEINE ZEGOCLOUD-DATEN HIER EINTRAGEN ----------
      // !!! Diese zwei Werte mit deinen echten Daten ersetzen !!!
      const appID = "142993488"; // <--- deine AppID (nur Zahl, OHNE Anführungszeichen!)
      const serverSecret = "9e6e265274d043218bbcb51e73276c22"; // <--- dein ServerSecret (mit Anführungszeichen)

      // ---------- KitToken erzeugen ----------
      // Hinweis:
      // generateKitTokenForTest ist nur für Tests gedacht.
      // In Produktion solltest du das Token sicher auf deinem Server erzeugen.
      const kitToken = ZegoUIKitPrebuilt.generateKitTokenForTest(
        appID,
        serverSecret,
        roomID,
        userID,
        userName
      );

      // ---------- ZEGOCLOUD UIKit initialisieren ----------
      const zp = ZegoUIKitPrebuilt.create(kitToken);

      // ---------- Raum betreten ----------
      zp.joinRoom({
        container: document.getElementById("root"),

        // Link zum Teilen (z.B. später für "Share Room")
        sharedLinks: [
          {
            name: "Room Link",
            url: window.location.href,
          },
        ],

        // Nur Audio, Gruppen-Voice-Room
        scenario: {
          mode: ZegoUIKitPrebuilt.GroupCall,
        },

        // Audio-Only Einstellungen
        turnOnMicrophoneWhenJoining: true,
        turnOnCameraWhenJoining: false,
        showMyCameraToggleButton: false,
        showAudioVideoSettingsButton: true,
        showScreenSharingButton: false,

        // UI-Elemente
        showTextChat: true,      // Chat unten im Menü
        showUserList: true,      // Mitgliederliste-Button
        showLeaveRoomConfirmDialog: true,

        // Layout / Sitzplätze
        layout: "Grid",          // sauberes Raster-Layout
        maxUsers: 7,             // Host + 6 Sprecher

        // Optional: Pre-Join-Ansicht überspringen, direkt rein
        showPreJoinView: false,
      });
    })();
  </script>
</body>
</html>
